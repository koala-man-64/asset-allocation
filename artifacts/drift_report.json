{
  "auto_remediation": null,
  "baseline": {
    "ci_context": false,
    "compare_from": "main",
    "compare_to": "HEAD",
    "reason": "configured baseline.branch",
    "requested": null,
    "resolved": "main"
  },
  "category_counts": {
    "config_infra": 2
  },
  "category_scores": {
    "config_infra": 30.0
  },
  "changed_files": [
    ".codedrift.yml",
    ".codex/skills/code-drift-sentinel/scripts/codedrift_sentinel.py",
    ".env.template",
    ".github/dependabot.yml",
    ".github/workflows/supply_chain_security.yml",
    "README.md",
    "deploy/job_bronze_earnings_data.yaml",
    "deploy/job_bronze_finance_data.yaml",
    "deploy/job_bronze_market_data.yaml",
    "deploy/job_bronze_price_target_data.yaml",
    "deploy/job_gold_earnings_data.yaml",
    "deploy/job_gold_finance_data.yaml",
    "deploy/job_gold_market_data.yaml",
    "deploy/job_gold_price_target_data.yaml",
    "deploy/job_silver_earnings_data.yaml",
    "deploy/job_silver_finance_data.yaml",
    "deploy/job_silver_market_data.yaml",
    "deploy/job_silver_price_target_data.yaml",
    "pyproject.toml",
    "requirements.lock.txt",
    "requirements.txt",
    "scripts/setup-env.ps1",
    "scripts/sync-all-to-github.ps1",
    "tasks/common/backfill.py",
    "tasks/common/market_reconciliation.py",
    "tasks/earnings_data/gold_earnings_data.py",
    "tasks/earnings_data/silver_earnings_data.py",
    "tasks/finance_data/gold_finance_data.py",
    "tasks/finance_data/silver_finance_data.py",
    "tasks/market_data/gold_market_data.py",
    "tasks/market_data/silver_market_data.py",
    "tasks/price_target_data/gold_price_target_data.py",
    "tasks/price_target_data/silver_price_target_data.py",
    "tests/conftest.py",
    "tests/earnings_data/test_gold_earnings_data_reconciliation.py",
    "tests/earnings_data/test_silver_earnings_data.py",
    "tests/finance_data/test_gold_finance_data_reconciliation.py",
    "tests/finance_data/test_silver_finance_data.py",
    "tests/market_data/test_gold_market_data_reconciliation.py",
    "tests/market_data/test_silver_market_data.py",
    "tests/price_target_data/test_gold_price_target_data_reconciliation.py",
    "tests/price_target_data/test_silver_price_target_data.py",
    "tests/tasks/test_market_reconciliation.py",
    "tmp_market_14.json"
  ],
  "drift_score": 30.0,
  "findings": [
    {
      "attribution": {
        ".github/dependabot.yml": [
          "8ce79b6|rdprokes|2026-02-26|done"
        ],
        ".github/workflows/supply_chain_security.yml": [
          "8ce79b6|rdprokes|2026-02-26|done"
        ],
        "deploy/job_bronze_earnings_data.yaml": [
          "4b8c4fd|rdprokes|2026-02-25|removed backfill"
        ],
        "deploy/job_bronze_finance_data.yaml": [
          "b61bf5b|rdprokes|2026-02-26|purge parity"
        ],
        "deploy/job_bronze_market_data.yaml": [
          "4b8c4fd|rdprokes|2026-02-25|removed backfill"
        ],
        "deploy/job_bronze_price_target_data.yaml": [
          "4b8c4fd|rdprokes|2026-02-25|removed backfill"
        ],
        "deploy/job_gold_earnings_data.yaml": [
          "4b8c4fd|rdprokes|2026-02-25|removed backfill"
        ],
        "deploy/job_gold_finance_data.yaml": [
          "4b8c4fd|rdprokes|2026-02-25|removed backfill"
        ],
        "deploy/job_gold_market_data.yaml": [
          "4b8c4fd|rdprokes|2026-02-25|removed backfill"
        ],
        "deploy/job_gold_price_target_data.yaml": [
          "4b8c4fd|rdprokes|2026-02-25|removed backfill"
        ],
        "deploy/job_silver_earnings_data.yaml": [
          "4b8c4fd|rdprokes|2026-02-25|removed backfill"
        ],
        "deploy/job_silver_finance_data.yaml": [
          "b61bf5b|rdprokes|2026-02-26|purge parity"
        ]
      },
      "category": "config_infra",
      "confidence": 0.8,
      "evidence": [
        "Changed config files: .github/dependabot.yml, .github/workflows/supply_chain_security.yml, deploy/job_bronze_earnings_data.yaml, deploy/job_bronze_finance_data.yaml, deploy/job_bronze_market_data.yaml, deploy/job_bronze_price_target_data.yaml, deploy/job_gold_earnings_data.yaml, deploy/job_gold_finance_data.yaml, deploy/job_gold_market_data.yaml, deploy/job_gold_price_target_data.yaml, deploy/job_silver_earnings_data.yaml, deploy/job_silver_finance_data.yaml"
      ],
      "expected": "Pipeline and infra changes should preserve or strengthen quality/safety gates.",
      "files": [
        ".github/dependabot.yml",
        ".github/workflows/supply_chain_security.yml",
        "deploy/job_bronze_earnings_data.yaml",
        "deploy/job_bronze_finance_data.yaml",
        "deploy/job_bronze_market_data.yaml",
        "deploy/job_bronze_price_target_data.yaml",
        "deploy/job_gold_earnings_data.yaml",
        "deploy/job_gold_finance_data.yaml",
        "deploy/job_gold_market_data.yaml",
        "deploy/job_gold_price_target_data.yaml",
        "deploy/job_silver_earnings_data.yaml",
        "deploy/job_silver_finance_data.yaml",
        "deploy/job_silver_market_data.yaml",
        "deploy/job_silver_price_target_data.yaml"
      ],
      "observed": "CI/deploy/configuration files were modified.",
      "remediation": "Review config deltas with release/security owners and validate gates remain enforced.",
      "risk": "medium",
      "score": 15.0,
      "severity": "medium",
      "title": "Configuration/infra files changed",
      "verification": [
        "Run CI pipeline in branch",
        "Validate deploy plans and policy checks"
      ]
    },
    {
      "attribution": {},
      "category": "config_infra",
      "confidence": 0.6,
      "evidence": [
        "Lookback config-touching commits: 17"
      ],
      "expected": "Configuration should remain stable and coordinated across contributors.",
      "files": [],
      "observed": "17 recent commits touched config/infra files in lookback window.",
      "remediation": "Consolidate config ownership, batch related changes, and document rationale in PRs.",
      "risk": "medium",
      "score": 15.0,
      "severity": "medium",
      "title": "Recent config churn detected",
      "verification": [
        "Inspect recent config PRs",
        "Audit gate consistency across workflows"
      ]
    }
  ],
  "gate_result": "pass",
  "generated_at": "2026-02-26T23:40:10.663870+00:00",
  "hotspots": [
    {
      "findings": 1,
      "path": "(command-output)",
      "score": 15.0
    },
    {
      "findings": 1,
      "path": "deploy/job_silver_market_data.yaml",
      "score": 1.07
    },
    {
      "findings": 1,
      "path": ".github/workflows/supply_chain_security.yml",
      "score": 1.07
    },
    {
      "findings": 1,
      "path": "deploy/job_bronze_price_target_data.yaml",
      "score": 1.07
    },
    {
      "findings": 1,
      "path": "deploy/job_gold_market_data.yaml",
      "score": 1.07
    },
    {
      "findings": 1,
      "path": "deploy/job_bronze_market_data.yaml",
      "score": 1.07
    },
    {
      "findings": 1,
      "path": "deploy/job_silver_price_target_data.yaml",
      "score": 1.07
    },
    {
      "findings": 1,
      "path": "deploy/job_gold_earnings_data.yaml",
      "score": 1.07
    },
    {
      "findings": 1,
      "path": "deploy/job_silver_finance_data.yaml",
      "score": 1.07
    },
    {
      "findings": 1,
      "path": "deploy/job_bronze_finance_data.yaml",
      "score": 1.07
    }
  ],
  "mode": "recommend",
  "patch_preview": [
    {
      "file": "deploy/job_silver_market_data.yaml",
      "hunks": [
        "@@ -40,6 +40,10 @@ properties:\n         value: INFO\n       - name: DISABLE_DOTENV\n         value: \"true\"\n+      - name: BACKFILL_START_DATE\n+        value: ${BACKFILL_START_DATE}\n+      - name: BACKFILL_END_DATE\n+        value: ${BACKFILL_END_DATE}\n       - name: SYSTEM_HEALTH_ARM_SUBSCRIPTION_ID\n         value: ${AZURE_SUBSCRIPTION_ID}\n       - name: SYSTEM_HEALTH_ARM_RESOURCE_GROUP"
      ]
    },
    {
      "file": ".github/workflows/supply_chain_security.yml",
      "hunks": [
        "@@ -5,6 +5,8 @@ on:\n   push:\n     branches:\n       - main\n+  schedule:\n+    - cron: \"17 9 * * 1-5\"\n   workflow_dispatch:\n \n permissions:",
        "@@ -35,6 +37,20 @@ jobs:\n           python -m pip install --upgrade pip\n           python -m pip install pip-audit\n \n+      - name: Prepare audit artifacts\n+        run: |\n+          mkdir -p artifacts\n+\n+      - name: Collect runtime audit report (JSON)\n+        run: |\n+          set -euo pipefail\n+          pip-audit -r requirements.lock.txt --format json -o artifacts/pip-audit-runtime.json || true\n+\n+      - name: Collect development audit report (JSON)\n+        run: |\n+          set -euo pipefail\n+          pip-audit -r requirements-dev.lock.txt --format json -o artifacts/pip-audit-dev.json || true\n... (hunk trimmed)"
      ]
    },
    {
      "file": "deploy/job_bronze_price_target_data.yaml",
      "hunks": [
        "@@ -43,6 +43,10 @@ properties:\n         value: INFO\n       - name: DISABLE_DOTENV\n         value: \"true\"\n+      - name: BACKFILL_START_DATE\n+        value: ${BACKFILL_START_DATE}\n+      - name: BACKFILL_END_DATE\n+        value: ${BACKFILL_END_DATE}\n       - name: DEBUG_SYMBOLS\n         value: \"${DEBUG_SYMBOLS}\"\n       - name: SYSTEM_HEALTH_ARM_SUBSCRIPTION_ID"
      ]
    },
    {
      "file": "deploy/job_gold_market_data.yaml",
      "hunks": [
        "@@ -44,6 +44,10 @@ properties:\n         value: INFO\n       - name: DISABLE_DOTENV\n         value: \"true\"\n+      - name: BACKFILL_START_DATE\n+        value: ${BACKFILL_START_DATE}\n+      - name: BACKFILL_END_DATE\n+        value: ${BACKFILL_END_DATE}\n       - name: SYSTEM_HEALTH_ARM_SUBSCRIPTION_ID\n         value: ${AZURE_SUBSCRIPTION_ID}\n       - name: SYSTEM_HEALTH_ARM_RESOURCE_GROUP"
      ]
    }
  ],
  "suggested_actions": [
    {
      "category": "config_infra",
      "files": [
        ".github/dependabot.yml",
        ".github/workflows/supply_chain_security.yml",
        "deploy/job_bronze_earnings_data.yaml",
        "deploy/job_bronze_finance_data.yaml",
        "deploy/job_bronze_market_data.yaml",
        "deploy/job_bronze_price_target_data.yaml",
        "deploy/job_gold_earnings_data.yaml",
        "deploy/job_gold_finance_data.yaml",
        "deploy/job_gold_market_data.yaml",
        "deploy/job_gold_price_target_data.yaml",
        "deploy/job_silver_earnings_data.yaml",
        "deploy/job_silver_finance_data.yaml",
        "deploy/job_silver_market_data.yaml",
        "deploy/job_silver_price_target_data.yaml"
      ],
      "patch_approach": "Apply deterministic fixes first (formatter/lint/rule-based edits), then targeted manual refactors.",
      "risk_level": "medium",
      "severity": "medium",
      "title": "Configuration/infra files changed",
      "verification_steps": [
        "Run CI pipeline in branch",
        "Validate deploy plans and policy checks"
      ],
      "what_to_change": "Review config deltas with release/security owners and validate gates remain enforced.",
      "why_it_is_drift": "Expected: Pipeline and infra changes should preserve or strengthen quality/safety gates. Observed: CI/deploy/configuration files were modified."
    },
    {
      "category": "config_infra",
      "files": [],
      "patch_approach": "Apply deterministic fixes first (formatter/lint/rule-based edits), then targeted manual refactors.",
      "risk_level": "medium",
      "severity": "medium",
      "title": "Recent config churn detected",
      "verification_steps": [
        "Inspect recent config PRs",
        "Audit gate consistency across workflows"
      ],
      "what_to_change": "Consolidate config ownership, batch related changes, and document rationale in PRs.",
      "why_it_is_drift": "Expected: Configuration should remain stable and coordinated across contributors. Observed: 17 recent commits touched config/infra files in lookback window."
    }
  ],
  "thresholds": {
    "drift_score_fail": 35.0
  },
  "tool_run_status": [
    {
      "command": "python3 -m ruff check .",
      "duration_sec": 0.37,
      "exit_code": 0,
      "name": "lint",
      "output_excerpt": "All checks passed!",
      "status": "passed"
    },
    {
      "command": "python3 -m pytest -q tests/tasks tests/market_data tests/finance_data tests/earnings_data tests/price_target_data",
      "duration_sec": 9.56,
      "exit_code": 0,
      "name": "test_fast",
      "output_excerpt": "..................................................................................................................................\n=============================== warnings summary ===============================\ntests/earnings_data/test_feature_generator.py::test_compute_features_adds_expected_columns\ntests/earnings_data/test_feature_generator.py::test_compute_features_rolls_over_quarters\ntests/earnings_data/test_feature_generator.py::test_compute_features_handles_divide_by_zero\ntests/earnings_data/test_gold_earnings_data.py::test_compute_features\n  /mnt/c/Users/rdpro/Projects/AssetAllocation/tasks/earnings_data/gold_earnings_data.py:142: DeprecationWarning: DataFrameGroupBy.apply operated on the grouping columns. This behavior is deprecated, and in a future version of pandas the grouping columns will be excluded from the operation. Either pass `include_groups=False` to exclude the groupings or explicitly select the grouping columns after groupby to silence this warning.\n    out = out.groupby(\"symbol\", sort=False, group_keys=False).apply(\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n130 passed, 4 warnings in 7.29s",
      "status": "passed"
    }
  ]
}
